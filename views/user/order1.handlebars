<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>

    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/css/linearicons.css">
    <link rel="stylesheet" href="/public/css/font-awesome.min.css">
    <link rel="stylesheet" href="/public/css/themify-icons.css">
    <link rel="stylesheet" href="/public/css/bootstrap.css">
    <link rel="stylesheet" href="/public/css/owl.carousel.css">
    <link rel="stylesheet" href="/public/css/nice-select.css">
    <link rel="stylesheet" href="/public/css/nouislider.min.css">
    <link rel="stylesheet" href="/public/css/ion.rangeSlider.css" />
    <link rel="stylesheet" href="/public/css/ion.rangeSlider.skinFlat.css" />
    <link rel="stylesheet" href="/public/css/magnific-popup.css">
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.2/css/dataTables.bootstrap4.min.css">
    <style>
        body::after {
            content: "";
            background-image: url(/public/images/daniel-storek-JM-qKEd1GMI-unsplash.jpg);
            background-size: cover;
            background-position: center;
            opacity: 0.5;
            /* Adjust the opacity value as per your preference */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }


        .overlay {
            margin-left: 2.5vh;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 10px;
            width: 15vh;
            height: 19vh;
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.8));
            opacity: 10;
            /* transition: opacity 0.3s ease; */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .overlay:hover {
            opacity: 1;
        }

        .overlay-content {
            color: #fff;
            font-size: 0.8rem;
            font-weight: lighter;
        }

        .card {
            width: 100%;
            height: 100%;
            border-radius: 50px;
            background: #ffffff;
            box-shadow: 20px 20px 60px #dfdddd,
                -20px -20px 60px #ffffff;
        }



        #preloader {
            background: #ffffff url(/public/images/c1bcd8a8c945b53da6b29f10a2a553c0.gif) no-repeat center center;
            background-size: 30%;
            height: 100vh;
            width: 100%;
            position: fixed;
            z-index: 100;
        }

        .card p {
            font-size: 17px;
            font-weight: 400;
            line-height: 20px;
            color: #666;
        }

        .card p.small {
            font-size: 14px;
        }

        .go-corner {
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            width: 32px;
            height: 32px;
            overflow: hidden;
            top: 0;
            right: 0;
            background-color: #2431a0;
            border-radius: 0 4px 0 32px;
        }

        .go-arrow {
            margin-top: -4px;
            margin-right: -4px;
            color: white;
            font-family: courier, sans;
        }

        .card1 {
            display: block;
            position: relative;
            border-radius: 10px;
            background-color: #f2f8f9;
            border-radius: 4px;
            padding: 32px 24px;
            margin: 12px;
            text-decoration: none;
            z-index: 0;
            overflow: hidden;
        }

        .card1:before {
            content: "";
            position: absolute;
            z-index: -1;
            top: -16px;
            right: -16px;
            background: linear-gradient(90deg, rgba(10, 13, 202, 0.842) 0%, rgb(212, 16, 147) 100%);
            height: 10%;
            width: 10%;
            border-radius: 32px;
            transform: scale(1);
            transform-origin: 50% 50%;
            transition: transform 0.25s ease-out;
        }

        .card1:hover:before {
            transform: scale(21);
        }

        .card1:hover p {
            transition: all 0.3s ease-out;
            color: rgba(255, 255, 255, 0.8);
        }

        .card1:hover h3 {
            transition: all 0.3s ease-out;
            color: #fff;
        }

        .card2 {
            display: block;
            top: 0px;
            position: relative;
            max-width: 262px;
            background-color: #f2f8f9;
            border-radius: 4px;
            padding: 32px 24px;
            margin: 12px;
            text-decoration: none;
            z-index: 0;
            overflow: hidden;
            border: 1px solid #f2f8f9;
        }

        .card2:hover {
            transition: all 0.2s ease-out;
            box-shadow: 0px 4px 8px rgba(38, 38, 38, 0.2);
            top: -4px;
            border: 1px solid #ccc;
            background-color: white;
        }

        .card2:before {
            content: "";
            position: absolute;
            z-index: -1;
            top: -16px;
            right: -16px;
            background: #00838d;

            border-radius: 32px;
            transform: scale(2);
            transform-origin: 50% 50%;
            transition: transform 0.15s ease-out;
        }

        .card2:hover:before {
            transform: scale(2.15);
        }

        .card3 {
            display: block;
            top: 0px;
            position: relative;
            max-width: 262px;
            background-color: #f2f8f9;
            border-radius: 4px;
            padding: 32px 24px;
            margin: 12px;
            text-decoration: none;
            overflow: hidden;
            border: 1px solid #f2f8f9;
        }

        .card3 .go-corner {
            opacity: 0.7;
        }

        .card3:hover {
            border: 1px solid #4980a5;
            box-shadow: 0px 0px 999px 999px rgba(255, 255, 255, 0.5);
            z-index: 500;
        }

        .card3:hover p {
            color: #00838d;
        }

        .card3:hover .go-corner {
            transition: opactiy 0.3s linear;
            opacity: 1;
        }

        .card4 {
            display: block;
            top: 0px;
            position: relative;
            max-width: 262px;
            background-color: #fff;
            border-radius: 4px;
            padding: 32px 24px;
            margin: 12px;
            text-decoration: none;
            overflow: hidden;
            border: 1px solid #ccc;
        }

        .card4 .go-corner {
            background-color: #4a779c;
            height: 100%;
            width: 16px;
            padding-right: 9px;
            border-radius: 0;
            transform: skew(6deg);
            margin-right: -36px;
            align-items: start;
            background-image: linear-gradient(-45deg, #8f479a 1%, #dc2a74 100%);
        }

        .card4 .go-arrow {
            transform: skew(-6deg);
            margin-left: -2px;
            margin-top: 9px;
            opacity: 0;
        }

        .card4:hover {
            border: 1px solid #cd3d73;
        }

        .card4 h3 {
            margin-top: 8px;
        }

        .card4:hover .go-corner {
            margin-right: -12px;
        }

        .card4:hover .go-arrow {
            opacity: 1;
        }

        .smallview {
            display: none;
        }



        @media only screen and (max-width: 768px) {
            p {
                display: none;
            }

            .d-flex {
                display: block;
            }

            .outcard {
                display: block;

            }
           


        }

        @media (max-width: 768px) {
            .smallview {
                display: block;
                margin-top: 2vh;
            }
          

        }



        @media (max-width: 768px) {
            #bigview {
                display: none;
            }
           
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
</head>

<body>
    <div id="preloader"></div>
    {{>userheader1}}
    <div style="height: 20vh;"></div>
    {{#if orderDetails}}
    <div>
        <div style="text-align: center;margin-top: 3vh;">
            <div style="width: 100%">
                <a class="messagelink btn-sm mt-5 mx-auto" data-bs-toggle="modal" data-bs-target="#exampleModalCenter"
                    style="background: linear-gradient(90deg, rgb(255, 0, 76) 0%, rgb(125, 164, 248) 100%); color: rgb(255, 255, 255); width: 100%;font-size: large;">leave
                    your feedback</a>
            </div>
        </div>
        <h2>{{message}}</h2>

        {{#each orderDetails }}
        <section class="gradient-custom">
            <div class="container ">
                <div class="row d-flex justify-content-center align-items-center">
                    <div class="col-lg-10 col-xl-10">
                        <div class="card " style="border-radius: 10px; margin-top: 10vh;">
                            <div class="media-body ">
                                <a href="/orderinfo/?id={{this.id}}"
                                    style="text-decoration: none; color: rgb(61, 59, 59);">
                                    <p style="font-size: small;" class="mt-1 ms-3">Order: ID {{this.id}}</p>
                                </a>
                            </div>
                            <div class="card-body " >
                                <div class="card1 shadow-0 border mb-4">
                                    <div class="card-body">
                                        <div class="d-flex outcard">
                                            <div class="col-md-3">
                                                <a href="/orderinfo/?id={{this.id}}" class="d-block d-md-none">
                                                    <img src="/public/images/products/{{this.products.[0].image}}"
                                                        style="height: 19vh; width: 15vh; border-radius: 10px;"
                                                        alt="{{this.products.[0].image}}">
                                                    <div class="overlay">
                                                        <div class="overlay-content">More..</div>
                                                    </div>
                                                </a>
                                                <a href="/orderinfo/?id={{this.id}}" class="d-none d-md-block">
                                                    <img src="/public/images/products/{{this.products.[0].image}}"
                                                        style="height: 19vh; width: 15vh; border-radius: 10px;"
                                                        alt="{{this.products.[0].image}}">
                                                    <div class="overlay">
                                                        <div class="overlay-content">More..</div>
                                                    </div>
                                                </a>
                                                <div class="smallview">
                                                    <h6 style="font-size: x-small;">Order: ID {{this.id}}</h6>
                                                    <h6 >₹{{this.total}}</h6>
                                                    {{#if cancel}}
                                                    <a class="btn-sm" onclick="cancelOrder('{{this.id}}')"
                                                        style="font-size: small;text-align: center; width: 25vh; background: linear-gradient(90deg, rgba(173, 17, 155, 0.842) 0%, rgb(50, 0, 233) 100%); color: rgb(255, 255, 255);">Cancel
                                                        Order</a>
                                                    {{else if return}}
                                                    <a class="btn-sm" onclick="returnOrder('{{this.id}}')"
                                                        style="font-size: small;background: linear-gradient(90deg, rgba(10, 13, 202, 0.842) 0%, rgb(125, 164, 248) 100%); color: rgb(255, 255, 255);">Return
                                                        Order</a>
                                                    {{/if}}
                                                </div>
                                            </div>
                                            <div>
                                                <div class="d-flex justify-content-around">
                                                    <div
                                                        class="col-md-2 text-center d-flex justify-content-center my-2 align-items-center">
                                                        <p class="mb-0"><span style="font-size:x-small">
                                                                Total:</span>₹{{this.total}}</p>
                                                    </div>
                                                    <div
                                                        class="col-md-2 text-center d-flex justify-content-center my-2 align-items-center">
                                                        <p class="mb-0">{{this.payment}}</p>
                                                    </div>
                                                    <div
                                                        class="col-md-2 text-center d-flex justify-content-center my-2 align-items-center">
                                                        <p class="mb-0"><span
                                                                style="font-size:x-small">Status:</span>{{this.status}}
                                                        </p>
                                                    </div>
                                                    <div
                                                        class="col-md-2 text-center d-flex justify-content-center my-2 align-items-center">
                                                        <p class="mb-0"><span style="font-size:x-small">Date of
                                                                order:</span><BR>{{this.date}}</p>
                                                    </div>
                                                    {{#if dateofdelivery}}
                                                    <div
                                                        class="col-md-2 text-center d-flex justify-content-center my-2 align-items-center">
                                                        <p class="mb-0"><span style="font-size:x-small">Date of
                                                                delivery</span><BR>{{formatDate this.dateofdelivery}}
                                                        </p>
                                                    </div>
                                                    {{/if}}
                                                </div>
                                                <div id="bigview">
                                                    {{#if cancel}}
                                                    <a class="btn-sm" onclick="cancelOrder('{{this.id}}')"
                                                        style="text-align: center; width: 25vh; background: linear-gradient(90deg, rgba(173, 17, 155, 0.842) 0%, rgb(50, 0, 233) 100%); color: rgb(255, 255, 255);">Cancel
                                                        Order</a>
                                                    {{else if return}}

                                                    <a class="btn-sm" onclick="returnOrder('{{this.id}}')"
                                                        style="background: linear-gradient(90deg, rgba(10, 13, 202, 0.842) 0%, rgb(125, 164, 248) 100%); color: rgb(255, 255, 255);">Return
                                                        Order</a>
                                                    {{/if}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        {{/each}}
        {{else}}
        <div class="container">
            <h1 class="ms-5">No order</h1>

            <img src="/public/images/storytelling_assets_2_new_thumbnail.gif" style="height: 45vh;" class="ms-5" alt="">
        </div>
        {{/if}}

        <div style="height: 10vh;">

        </div>
        <div class="modal " tabindex="-1" role="dialog" id="exampleModalCenter">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header"
                        style="background:linear-gradient(90deg, rgba(10, 13, 202, 0.842) 0%, rgb(125, 164, 248) 100%) ;color: #f8f9fa;">
                        <h5 class="modal-title" style="color: #ffffff;">Leave your feedback</h5>
                        <button type="button" class="close btn btn " style="color: #f8f9fa;" data-bs-dismiss="modal"
                            aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form action="/addMessage" method="post">
                        <div class="modal-body" style="background-color: rgb(231, 231, 231);">
                            <p style="font-size: small;color: rgb(46, 46, 46);"><i>We value you, our valued
                                    customer, and we
                                    value your feedback. Your opinion matters to us, as
                                    it helps us improve and serve you better</i> </p>
                            <div class="form-group">

                                <textarea name="feedback" id="editDescription" cols="30" rows="3" name="description"
                                    placeholder="feedback"></textarea>
                            </div>

                        </div>
                        <div class="modal-footer" style="background-color: rgb(248, 248, 248);">
                            <button type="submit" class="btn btn-primary">Add</button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </form>
                </div>
                  
            </div>
        </div>

        {{>userfooter}}

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        {{!--
        <script src="sweetalert2.all.min.js"></script> --}}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/911ceacc93.js" crossorigin="anonymous"></script>
        <script src="/public/js/vendor/jquery-2.2.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"></script>
        <script src="/public/js/vendor/bootstrap.min.js"></script>
        <script src="/public/js/jquery.ajaxchimp.min.js"></script>
        <script src="/public/js/jquery.nice-select.min.js"></script>
        <script src="/public/js/jquery.sticky.js"></script>
        <script src="/public/js/nouislider.min.js"></script>
        <script src="/public/js/countdown.js"></script>
        <script src="/public/js/jquery.magnific-popup.min.js"></script>
        <script src="/public/js/owl.carousel.min.js"></script>
        <!--gmaps Js-->
        <script
            src="/public/https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
        <script src="/public/js/gmaps.min.js"></script>
        <script src="/public/js/main.js"></script>
        <script>
            function cancelOrder(orderId) {
                Swal.fire({
                    title: 'Are you sure to cancel this order?',
                    text: "We apologize if something happened wrong",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#3085d6',
                    confirmButtonText: 'Yes, Cancel it!'

                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire(
                            'Cancelled!',
                            'Order has been cancelled.',
                            'success'
                        ).then(() => {
                            window.location.href = '/cancelOrder?id=' + orderId;
                        });
                    }
                });
            }
            async function returnOrder(orderId) {
                const response = await fetch(`/getOrderDate/${encodeURIComponent(orderId)}`);
                const resBody = await response.json();
                console.log(resBody)
                const deliveryDate = moment(resBody.deliveryDate);
                const currentDate = moment();

                const daysDifference = currentDate.diff(deliveryDate, 'days');
                if (daysDifference > 7) {
                    // Display an error message if more than 7 days have passed since the order date
                    Swal.fire({
                        title: 'Return Not Allowed',
                        text: 'More than 7 days have passed since the delivered date. Return is not allowed.',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                }
                else {
                    Swal.fire({
                        title: 'Are you sure to return this order?',
                        text: "We apologize if something happened wrong",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#d33',
                        cancelButtonColor: '#3085d6',
                        confirmButtonText: 'Yes, retutn it!'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            Swal.fire(
                                'return process activated!',
                                'Order will return soon.',
                                'success'
                            ).then(() => {
                                window.location.href = '/returnOrder?id=' + orderId;
                            });
                        }
                    });
                }
            }
            $(function () {
                $('#productsTable').DataTable();
            });

        </script>

        <script>
            var loader = document.getElementById("preloader")
            window.addEventListener('load', function () {
                loader.style.display = "none"
            })
        </script>



</body>

</html>





{{!-- <section class="cart_area">
    <div class="container">
        <h2>{{message}}</h2>
        <div class="cart_inner">
            <a class="btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModalCenter"
                style="float: right;background:linear-gradient(90deg, rgb(255, 0, 76) 0%, rgb(125, 164, 248) 100%) ;color: rgb(255, 255, 255);">leave
                you feedback
            </a>
            <div class="table-responsive">
                <table class="table" id="productsTable">
                    <thead>
                        <tr>
                            <th scope="col">No</th>
                            <th scope="col">Orderid</th>
                            <th scope="col">Date</th>
                            <th scope="col">Total</th>
                            <th scope="col">Payment</th>
                            <th scope="col">Status</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>

                        {{#each orderDetails}}
                        <tr class="cardDataClass">
                            <td><button class="btn-sm btn btn-info" style="border-radius: 100px;" disabled>{{inc
                                    @index}}</button></td>
                            <td>
                                <div class="media">
                                    <div class="image-container">
                                        <a href="/orderinfo/?id={{this.id}}">
                                            <img src="/public/images/products/{{this.products.[0].image}}"
                                                style="height: 19vh;width:15vh" alt="{{this.products.[0].image}}">
                                            <div class="overlay">
                                                <div class="overlay-content">
                                                    More..
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="media-body">
                                        <a href="/orderinfo/?id={{this.id}}" style="text-decoration:none;color: black;">
                                            <p>{{this.id}}</p>
                                        </a>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <h5>{{this.date}}</h5>
                            </td>
                            <td>
                                <p style="color: black; margin-bottom: 0;">₹{{this.total}}</p>
                            </td>
                            <td>
                                <p style="color: black; margin-bottom: 0;">{{this.payment}}</p>
                            </td>
                            <td>
                                <h5><span class="totalPriceClass">{{this.status}}</span></h5>
                            </td>
                            <td>
                                <div class="d-flex align-items-start">
                                    {{#if cancel}}
                                    <a class="btn-sm" onclick="cancelOrder('{{this.id}}')"
                                        style="background:linear-gradient(90deg, rgba(173, 17, 155, 0.842) 0%, rgb(50, 0, 233) 100%) ;color: rgb(255, 255, 255);">Cancel
                                        Order</a>
                                    {{else if return}}
                                    <a class="btn-sm" onclick="returnOrder('{{this.id}}')"
                                        style="background:linear-gradient(90deg, rgba(10, 13, 202, 0.842) 0%, rgb(125, 164, 248) 100%) ;color: rgb(255, 255, 255);">Return
                                        Order</a>
                                    {{/if}}
                                </div>
                            </td>
                        </tr>
                        {{/each}}

                    </tbody>
                </table>

            </div>
        </div>
    </div>
    //
</section> --}}